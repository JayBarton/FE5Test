#version 330 core
in vec2 TextureCoordinates;
out vec4 color;

uniform sampler2D image;
uniform vec4 spriteColor;
uniform vec2 scale;
uniform vec2 sheetScale;

uniform int index;

uniform vec3 topColor;
uniform vec3 bottomColor;


void main()
{    

/*
	texCoord.x = mod(texCoord.x * scale, originalSize/sheetSize);
	So if I had a sprite that was 48 wide on a sheet that is 1024 wide, and I scaled it up to a size of 120
	texCoord.x = mod(texCoord.x * 2.5f, 48.0f/1024.0f);
*/

	vec2 texCoord = TextureCoordinates;
	texCoord.x = mod(texCoord.x * scale.x, sheetScale.x) + (sheetScale.x * index);
	texCoord.y = mod(texCoord.y * scale.y, sheetScale.y);
	
	vec4 imageColor = texture(image, texCoord);
	
	vec4 tColor = mix(vec4(topColor, 1), imageColor, 0.25);
	vec4 bColor = mix(vec4(bottomColor, 1), imageColor, 0.25);
	
    color = mix(tColor, bColor, TextureCoordinates.y);
	//color = vec4(topColor, 1);
}  